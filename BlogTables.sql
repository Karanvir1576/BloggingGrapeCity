CREATE TABLE USER_DETAILS (USER_ID int IDENTITY(1,1),NAME varchar(100),EMAIL varchar(100) CONSTRAINT PK_User PRIMARY KEY(USER_ID))
GO
CREATE TABLE BLOGS (BLOG_ID int IDENTITY(1,1),BLOG_HEADER varchar(100), CONTENT text,DTTM_RCD_ADDED varchar(14), DTTM_RCD_UPDATED varchar(14) CONSTRAINT PK_Blog PRIMARY KEY(BLOG_ID))
GO
CREATE TABLE USER_X_BLOGS(USER_ID int, BLOG_ID int,CONSTRAINT FK_UserId FOREIGN KEY (USER_ID) REFERENCES USER_DETAILS(USER_ID) ON DELETE CASCADE, CONSTRAINT FK_BlogId FOREIGN KEY (BLOG_ID) REFERENCES BLOGS(BLOG_ID) ON DELETE CASCADE )
GO
INSERT INTO USER_DETAILS(NAME,EMAIL) VALUES('GrapeCity','grape@123.com')
GO

CREATE PROCEDURE [dbo].[CreateBlog]
	@Title varchar(100),
	@Content text,
	@UserId int
AS
	BEGIN
	DECLARE @BlogId int
		INSERT INTO BLOGS VALUES(@Title,@Content,FORMAT(GETDATE(),'yyyyMMddhhmmss'),FORMAT(GETDATE(),'yyyyMMddhhmmss'))
		SELECT @BlogId = SCOPE_IDENTITY()
		INSERT INTO USER_X_BLOGS VALUES(@UserId,@BlogId)
	END
